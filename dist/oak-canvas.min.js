"use strict";oak.canvas=oak.canvas||{},function(){var i=inherit(oak.Statable,function(){oak.support.canvas&&(this._numResizables=0,this._numInStack=0,this._numScenes=0,this._numTimers=0,this._calls=[],this._resizables=[],this._stack=[],this._timers=[],this.paused=!1,this.windowPadding={left:0,right:0,top:0,bottom:0},this.delta=0,this.deviceBackingRatio=oak.support.deviceBackingRatio>=2?2:1,this.fps=0,this.frameRate=30,this.pixelRatio=oak.support.pixelRatio>=2?2:1,this._init=function(){this._hiddenPrefix="hidden",this._hiddenPrefix in document?document.addEventListener("visibilitychange",this._onVisibility):(this._hiddenPrefix="mozHidden")in document?document.addEventListener("mozvisibilitychange",this._onVisibility):(this._hiddenPrefix="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",this._onVisibility):(this._hiddenPrefix="msHidden")in document?document.addEventListener("msvisibilitychange",this._onVisibility):"onfocusin"in document?document.onfocusin=document.onfocusout=this._onVisibility:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=this._onVisibility},this._onResize=function(){var i;for(i=0;i<this._numResizables;i+=1)this.getWindowBounds(),this._resizables[i].resize.call(this._resizables[i],this.getWindowBounds())}.bind(this),this.getWindowBounds=function(){var i={top:this.windowPadding.top,left:this.windowPadding.left,width:window.innerWidth-(this.windowPadding.left+this.windowPadding.right),height:window.innerHeight-(this.windowPadding.top+this.windowPadding.bottom)};return i.bottom=this.windowPadding.top+i.height,i.right=this.windowPadding.left+i.width,i},this._onVisibility=function(i){i=i||window.event,this._time=(new Date).getTime();var t={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"},e=t[i.type];e="undefined"!=typeof e?e:document[this._hiddenPrefix]?"hidden":"visible","hidden"===e?oak.canvas.renderer.toggle(!0):"visible"===e&&setTimeout(function(){oak.canvas.renderer.toggle(!1)},100),oak.canvas.renderer.trigger("visibility",e)}.bind(this),this.addResizable=function(i){this._resizables.push(i),this._numResizables=this._resizables.length,i.resize.call(i,this.getWindowBounds())},this.addToStack=function(i){this._stack.push(i),this._numInStack=this._stack.length},this.callLater=function(i,t,e){this._calls.push({callback:i,args:t,scope:e||null})},this.cancelTimeout=function(i){var t=this._timers.indexOf(i);return-1!==t?(this._timers.splice(t,1),this._numTimers=this._timers.length,!0):!1},this.draw=function(){var i,t,e,s=(new Date).getTime();for(this._dt=s-(this._time||s),this.delta=this._dt/this.frameRate,this._time=s,this.fps=Math.round(1/(this._dt/1e3)),t=0;t<this._calls.length;t+=1)i=this._calls[t],i.callback.apply(i.scope,i.args);if(this._calls.length=0,this.paused===!1&&(oak.raf(this.draw),this.delta<160)){for(t=0;t<this._numInStack;t+=1)this._stack[t].frame.call(this._stack[t]);var n=this.frameRate*this.delta;for(t=0;t<this._numTimers;t+=1)e=this._timers[t],e.time+=n,e.time>=e.delay&&(this._timers.splice(t,1),this._numTimers=this._timers.length,e.callback.apply(e.scope,e.args),t-=1)}}.bind(this),this.measureText=function(i,t){return"undefined"!=typeof t&&oak._dummyCtx.font!==t&&(oak._dummyCtx.font=t),oak._dummyCtx.measureText(i)},this.removeResizable=function(i){var t=this._resizables.indexOf(i);t>=0&&(this._resizables.splice(t,1),this._numResizables=this._resizables.length)},this.removeFromStack=function(i){var t=this._stack.indexOf(i);t>=0&&(this._stack.splice(t,1),this._numInStack=this._stack.length)},this.startup=function(){window.addEventListener("resize",this._onResize),this.on("resize",this._onResize);var i=oak.strap("body");i.removeClass("preload").addClass("loaded"),oak.raf(this.draw),this.setState("startup")},this.timeout=function(i,t,e){var s={time:0,delay:t,callback:i,scope:e||null,args:oak._arrProto.slice.call(arguments,3)},n=this;return this.callLater(function(i){n._timers.push(i),n._numTimers=n._timers.length},[s]),s},this.toggle=function(i){this.paused=i,this.paused===!1?(this._time=(new Date).getTime(),oak.raf(this.draw),this.trigger("rendererResumed")):this.trigger("rendererPaused")})});oak.canvas.renderer=new i}();
"use strict";oak.canvas.Display=inherit(oak.Statable,function(){this._calc=function(){var t=this.keeper;this.globalX=this.x+this.deltaX,this.globalY=this.y+this.deltaY,this.globalX=t?t.globalX+this.globalX:this.globalX,this.globalY=t?t.globalY+this.globalY:this.globalY,this.globalRotation=t?t.globalRotation+this.rotation:this.rotation,this.globalAlpha=t?t.globalAlpha*this.alpha:this.alpha,this.globalScaleX=t?t.globalScaleX*this.scaleX:this.scaleX,this.globalScaleY=t?t.globalScaleY*this.scaleY:this.scaleY},this._draw=function(t){t.translate(this.globalX,this.globalY),t.rotate(this.globalRotation);var i=0===this.globalScaleX?.01:this.globalScaleX,e=0===this.globalScaleY?.01:this.globalScaleY;t.scale(i,e),t.globalAlpha=this.globalAlpha,this.draw(t)},this._restore=function(t){t.restore()},this._save=function(t){t.save()}}),oak.extend(oak.canvas.Display.prototype,{_init:function(t){oak.Statable.prototype._init.call(this,t),this.globalAlpha=0,this.globalRotation=0,this.globalX=0,this.globalY=0,this.globalScale=1,this.globalScaleX=1,this.globalScaleY=1,this.index=-1,this.keeper=void 0,this.stage=void 0,this.children=[],this.numChildren=0,this._calc()},assignStage:function(t){"undefined"!=typeof this.stage&&t.setStage(this.stage)},addChild:function(t){t.keeper=this,this.children.push(t),t.index=this.numChildren,this.numChildren=this.children.length,t.added(),this.assignStage(t)},addChildAt:function(t,i){oak.isNumber(i)&&(t.keeper=this,this.children.splice(i,0,t),t.index=i,this.numChildren=this.children.length,t.added(),this.assignStage(t))},added:function(){},addedToStage:function(){},calc:function(){},draw:function(){},setStage:function(t){this.stage=t,this.addedToStage();var i;for(i=0;i<this.numChildren;i+=1)this.children[i].setStage(t)},removeChild:function(t){var i=this.children.indexOf(t);0>i||(this.children.splice(i,1),this.numChildren=this.children.length,t.removed(),t.keeper=void 0,t.stage=void 0)},removeChildren:function(){var t=0;for(t;t<this.numChildren;t+=1){var i=this.children[t];i.removed(),i.keeper=void 0,i.stage=void 0}this.children=[],this.numChildren=0},removed:function(){},render:function(t){if(this._calc(),this.calc(),this.visible===!1)return!1;this._save(t),this._draw(t),this._restore(t);var i,e;for(e=0;e<this.numChildren;e+=1)i=this.children[e],i.render(t);return!0},setIndex:function(t){return this.stage?this.stage.setChildIndex(this,t):-1}}),oak.canvas.Display.prototype.defaults({deltaX:0,deltaY:0,alpha:1,centerX:0,centerY:0,rotation:0,x:0,y:0,width:0,height:0,scaleX:1,scaleY:1,visible:!0});
"use strict";oak.canvas.Stage=inherit(oak.canvas.Display,function(){this._evented=[],this.mouse={x:0,y:0},this._offset={left:0,top:0},this._addEventedHandler=function(e,t,s,i){var n=this._getObserver(t);"undefined"==typeof n&&(n={target:t,isOver:!1},this._evented.push(n)),n[e]={callback:s,args:i},this._mouseIsOver(t)&&t.visible&&this.strap.css("cursor","pointer")},this._addListeners=function(){oak.support.isTouch?(this.addObserver(this.canvas,"touchstart",this._onTouchStart),this.addObserver(this.canvas,"touchmove",this._onTouchMove),this.addObserver(this.canvas,"touchend",this._onTouchEnd)):(this.addObserver(this.canvas,"click",this._onClick),this.addObserver(this.canvas,"mousedown",this._onMouseDown),this.addObserver(this.canvas,"mousemove",this._onMouseMove),this.addObserver(this.canvas,"mouseup",this._onMouseUp))},this._calcMouse=function(e){this.mouse.x=e.pageX-this._offset.left,this.mouse.y=e.pageY-this._offset.top},this._checkCursor=function(){var e,t,s=this._evented.length,i=this.cursor;for(e=0;s>e;e+=1)t=this._evented[e],this._mouseIsOver(t.target)?(i=t.target.cursor||"pointer",t.isOver===!1&&"undefined"!=typeof t.over&&t.over.callback.apply(t.target,t.over.args),t.isOver===!1&&"undefined"!=typeof t.mousemove&&t.mousemove.callback.apply(t.target,t.over.args),t.isOver=!0):(t.isOver===!0&&"undefined"!=typeof t.out&&t.out.callback.apply(t.target,t.out.args),t.isOver=!1);this.strap.css("cursor",i)},this._getObserver=function(e){var t,s=this._evented.length;for(t=0;s>t;t+=1)if(this._evented[t].target===e)return this._evented[t]},this._mouseIsOver=function(e){if(!e.visible)return!1;var t=e.eventedX||e.globalX,s=e.eventedY||e.globalY,i=e.eventedCenterX||e.centerX,n=e.eventedCenterY||e.centerY,o=e.eventedWidth||e.width,a=e.eventedHeight||e.height;return this.mouse.x>=t-i&&this.mouse.x<=t-i+o&&this.mouse.y>=s-n&&this.mouse.y<=s-n+a?!0:!1},this._onClick=function(e){this._calcMouse(e),this._triggerMouseEvent("click")},this._onMouseDown=function(e){this._calcMouse(e),this._triggerMouseEvent("mousedown",e)},this._onMouseMove=function(e){this._calcMouse(e),this._checkCursor()},this._onMouseUp=function(e){this._calcMouse(e),this._triggerMouseEvent("mouseup")},this._onTouchEnd=function(){this._triggerMouseEvent("mouseup"),this._triggerMouseEvent("click")},this._onTouchMove=function(e){var t=e.touches.item(0);this.mouse.x=t.clientX,this.mouse.y=t.clientY},this._onTouchStart=function(e){var t=e.touches.item(0);this.mouse.x=t.clientX,this.mouse.y=t.clientY,this._triggerMouseEvent("mousedown"),this._triggerMouseEvent("touchstart",e)},this._removeEventedHandler=function(e,t){var s=this._getObserver(t);if("undefined"!=typeof s&&("undefined"!=typeof s[e]&&delete s[e],"undefined"==typeof s.click&&"unfeined"==typeof s.over&&"undefined"==typeof s.out)){var i=this._evented.indexOf(s);i>=0&&this._evented.splice(i,1)}},this._removeListeners=function(){this.removeObserver(this.canvas,"touchstart",this._onTouchStart),this.removeObserver(this.canvas,"touchmove",this._onTouchMove),this.removeObserver(this.canvas,"touchend",this._onTouchEnd),this.removeObserver(this.canvas,"click",this._onClick),this.removeObserver(this.canvas,"mousedown",this._onMouseDown),this.removeObserver(this.canvas,"mousemove",this._onMouseMove),this.removeObserver(this.canvas,"mouseup",this._onMouseUp)},this._triggerMouseEvent=function(e,t){var s,i,n,o=this._evented.length;for(s=o-1;s>-1;s-=1)if(i=this._evented[s],n=i.target,"undefined"!=typeof i[e]&&this._mouseIsOver(n)){var a=Array.prototype.slice.call(i[e].args);return t&&(a=Array.prototype.concat.call(a,[t])),void i[e].callback.apply(i.target,a)}}}),oak.extend(oak.canvas.Stage.prototype,{_init:function(e){oak.canvas.Display.prototype._init.call(this,e),this.backgroundColor=e.backgroundColor||"#FFF",this.opaque=e.opaque||!1;var t,s,i=["out","over","click","mousedown","mouseup","mousemove"],n=function(e){return function(t,s){this._addEventedHandler(e,t,s,Array.prototype.slice.call(arguments,2))}},o=function(e){return function(t){this._removeEventedHandler(e,t)}};for(t=0;t<i.length;t+=1)s=i[t],this[s]=n(s),this["remove"+s.charAt(0).toUpperCase()+s.slice(1)]=o(s);"string"==typeof e.id?this.canvas=document.getElementById(e.id):"undefined"!=typeof e.el&&oak.isNode(e.el)?this.canvas=e.el:"undefined"!=typeof e.container&&oak.isStrap(e.container)&&(this.canvas=document.createElement("canvas"),e.container.append(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.strap=oak.strap(this.canvas),this._addListeners(),this.pixelReady(),oak.canvas.renderer.addResizable(this)},addChild:function(e){e.setStage(this),oak.canvas.Display.prototype.addChild.call(this,e)},addChildAt:function(e,t){e.setStage(this),oak.canvas.Display.prototype.addChildAt.call(this,e,t)},click:function(e,t){this._addEventedHandler("click",e,t,Array.prototype.slice.call(arguments,2))},disable:function(){this._removeListeners(),this.strap.css("cursor","auto")},enable:function(){this._addListeners()},frame:function(){this.opaque?(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)):this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.render(this.ctx)},mousedown:function(e,t){this._addEventedHandler("mousedown",e,t,Array.prototype.slice.call(arguments,2))},mouseup:function(e,t){this._addEventedHandler("mouseup",e,t,Array.prototype.slice.call(arguments,2))},out:function(e,t){this._addEventedHandler("out",e,t,Array.prototype.slice.call(arguments,2))},over:function(e,t){this._addEventedHandler("over",e,t,Array.prototype.slice.call(arguments,2))},pixelReady:function(){return this.canvas.height=this.height*oak.canvas.renderer.deviceBackingRatio,this.canvas.width=oak.canvas.renderer.deviceBackingRatio>1?this.width*oak.canvas.renderer.deviceBackingRatio-1:this.width*oak.canvas.renderer.deviceBackingRatio,this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.ctx.scale(oak.canvas.renderer.deviceBackingRatio,oak.canvas.renderer.deviceBackingRatio),this},removeEvented:function(e){var t=this;this._evented.forEach(function(s,i){s.target===e&&t._evented.splice(i,1)})},resize:function(){this._offset=this.strap.offset()},setChildIndex:function(e,t){var s=this.children.indexOf(e);return s>=0?(this.children.splice(s,1),this.children.splice(t,0,e),e.index=t,t):-1},touchstart:function(e,t){this._addEventedHandler("touchstart",e,t,Array.prototype.slice.call(arguments,2))}}),oak.canvas.Stage.prototype.defaults({cursor:"default"});
"use strict";oak.canvas.Sprite=inherit(oak.canvas.Display,function(){}),oak.extend(oak.canvas.Sprite.prototype,{_init:function(t){oak.canvas.Display.prototype._init.call(this,t),this.bounds={left:0,right:0,top:0,bottom:0}},defineBounds:function(t){this._localBounds=t},isVisible:function(){if(this.alwaysVisible===!0)return!0;if("undefined"!=typeof this._localBounds){var t=this.globalX-this.centerX,i=this.globalY-this.centerY;this.bounds.left=t+this._localBounds.left,this.bounds.top=i+this._localBounds.top,this.bounds.right=t+this._localBounds.right,this.bounds.bottom=i+this._localBounds.bottom}else if(0===this.rotation)this.bounds.left=this.globalX-this.centerX,this.bounds.top=this.globalY-this.centerY,this.bounds.right=this.bounds.left+this.width,this.bounds.bottom=this.bounds.top+this.height;else{var s,o,h,n,e,a,l,r,d=this.globalX-this.centerX,u=this.globalY-this.centerY,b=d+this.width,c=u+this.height,f=this.globalX,g=this.globalY,p=this.rotation,_=Math.cos(p),m=Math.sin(p);s=f+(d-f)*_+(u-g)*m,o=f+(b-f)*_+(u-g)*m,h=f+(b-f)*_+(c-g)*m,n=f+(d-f)*_+(c-g)*m,e=g+(d-f)*m+(u-g)*_,a=g+(b-f)*m+(u-g)*_,l=g+(b-f)*m+(c-g)*_,r=g+(d-f)*m+(c-g)*_,this.bounds={left:Math.min(s,o,h,n),right:Math.max(s,o,h,n),top:Math.min(e,a,l,r),bottom:Math.max(e,a,l,r)}}return this.bounds.bottom<0||this.bounds.top>this.stage.height||this.bounds.right<0||this.bounds.left>this.stage.width?!1:!0},render:function(t){if(this._calc(),this.calc(),this.visible===!1||this.isVisible()===!1)return!1;this._save(t),this._draw(t),this._restore(t);var i,s;for(s=0;s<this.numChildren;s+=1)i=this.children[s],i.render(t);return!0}}),oak.canvas.Sprite.prototype.defaults({alwaysVisible:!1});
oak.canvas.Camera=function(){}.inherit(oak.Base,{x:0,y:0});
"use strict";oak.canvas.Text=function(){}.inherit(oak.canvas.Sprite,{_init:function(t){oak.canvas.Sprite.prototype._init.call(this,t),this.resetStyle()},draw:function(t){t.translate(-this.centerX,-this.centerY),t.fillStyle=this.color,t.font=this.style,t.textAlign=this.textAlign,t.textBaseline=this.baseline,t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur},resetStyle:function(){this.style=[this.weight,this.size.toString().replace(/([\d\.]+)/,"$1px"),this.font].join(" "),this.width=oak.canvas.renderer.measureText(this.label,this.style).width,this.height=this.size}}),oak.canvas.Text.prototype.defaults({baseline:"alphabetic",color:"#FFF",font:"Helvetica",label:"",shadowColor:"rgba(0,0,0,.20)",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:2,size:40,textAlign:"left",weight:800});
"use strict";oak.canvas.TextField=function(){}.inherit(oak.canvas.Text,{draw:function(a){oak.canvas.Text.prototype.draw.call(this,a),a.fillText(this.label,0,0)}});
"use strict";oak.canvas.Sheet=inherit(oak.canvas.Sprite,function(){}),oak.extend(oak.canvas.Sheet.prototype,{_init:function(t){oak.canvas.Sprite.prototype._init.call(this,t),this.shift(this.cropX,this.cropY),this.cropWidth=this.width*oak.canvas.renderer.pixelRatio,this.cropHeight=this.height*oak.canvas.renderer.pixelRatio},draw:function(t,i,e){i=i||0,e=e||0,t.drawImage(this.source.img,this.cropX,this.cropY,this.cropWidth,this.cropHeight,-this.centerX+i,-this.centerY+e,this.width,this.height)},shift:function(t,i){this.cropX=t*oak.canvas.renderer.pixelRatio,this.cropY=i*oak.canvas.renderer.pixelRatio}}),oak.canvas.Sheet.prototype.defaults({cropX:0,cropY:0,source:null});
"use strict";oak.canvas.Sequence=function(){}.inherit(oak.canvas.Sheet,{_init:function(t){if(oak.canvas.Sheet.prototype._init.call(this,t),this.frames.length)this.numFrames=this.frames.length;else{this.numFrames=Math.round(this.source.height/this.height);var i,s=0,e=Math.round(this.source.width/this.width),h=0;for(i=0;i<this.numFrames;i+=1)this.frames.push({width:this.width,height:this.height,x:this.width*s,y:this.height*h,deltaX:0,deltaY:0}),s+=1,s>e-1&&(s=0,h+=1)}return this.startFrame=oak.defined(t.startFrame)?t.startFrame:0,this.endFrame=oak.defined(t.endFrame)?t.endFrame:this.numFrames-1,this.gotoFrame(this.frameIndex),this.autoplay===!0&&this.play(this.startFrame,this.endFrame),this},gotoFrame:function(t){this.frameIndex=t,this.frame=this.frames[t],this.cropX=this.frame.x*oak.canvas.renderer.pixelRatio,this.cropY=this.frame.y*oak.canvas.renderer.pixelRatio,this.cropWidth=this.frame.width*oak.canvas.renderer.pixelRatio,this.cropHeight=this.frame.height*oak.canvas.renderer.pixelRatio,this.width=this.frame.width,this.height=this.frame.height},draw:function(t){if(this.isSnake,this.playing===!0&&(this.count+=1*oak.canvas.renderer.delta,this.count>=this.countMax)){if(1===this.dir&&this.frameIndex>=this.endFrame||-1===this.dir&&this.frameIndex<=this.endFrame){if(this.yoyo===!0){this.dir*=-1,this.frameIndex+=this.dir;var i=this.startFrame;this.startFrame=this.endFrame,this.endFrame=i}this.loops>0&&this.loop<this.loops&&1===this.dir?(this.yoyo===!1&&(this.frameIndex=this.startFrame),this.loop+=1):this.loops<0&&this.yoyo===!1?this.frameIndex=this.startFrame:1===this.dir&&(this.trigger("complete"),this.playing=!1)}else this.frameIndex+=this.dir;this.count=0,this.gotoFrame(this.frameIndex)}oak.canvas.Sheet.prototype.draw.call(this,t,this.frame.deltaX||0,this.frame.deltaY||0)},isVisible:function(){return this.bounds.left=this.globalX-this.centerX+this.frame.deltaX,this.bounds.right=this.globalX-this.centerX+this.frame.width+this.frame.deltaX,this.bounds.top=this.globalY-this.centerY+this.frame.deltaY,this.bounds.bottom=this.globalY-this.centerY+this.frame.height+this.frame.deltaY,this.bounds.bottom<0||this.bounds.top>this.stage.height||this.bounds.right<0||this.bounds.left>this.stage.width?!1:!0},play:function(t,i,s,e){oak.defined(s)&&(this.fps=s),oak.defined(e)&&(this.loops=e),this.dir=t>i?-1:1,this.loop=0,this.count=0,this.countMax=Math.round(oak.canvas.renderer.frameRate/this.fps),this.startFrame=t,this.endFrame=i,this.playing=!0,this.gotoFrame(t)}}),oak.canvas.Sequence.prototype.defaults({autoplay:!1,count:0,dir:1,fps:15,frames:[],frameIndex:0,loop:0,loops:-1,playing:!1,yoyo:!1});
"use strict";oak.canvas.Scene=function(){this.addGfx=function(i){this._gfxList.push(i),this.numGfx=this._gfxList.length,this.addChild(i)},this.addResizer=function(i){this._resizers.push(i),this.numResizers=this._resizers.length,"undefined"!=typeof this.stage&&i.call(null,oak.canvas.renderer.getWindowBounds())},this.addSprite=function(i){this._sprites.push(i),this.numSprites=this._sprites.length,this.addChild(i)},this.getGfxAt=function(i){return this._gfxList[i]},this.removeGfx=function(i){var s=this._gfxList.indexOf(i);0>s||(this._gfxList.splice(s,1),this.numGfx=this._gfxList.length,this.removeChild(i))},this.removeResizer=function(i){var s=this._resizers.indexOf(i);0>s||(this._resizers.splice(s,1),this.numResizers=this._resizers.length)},this.removeSprite=function(i){var s=this._sprites.indexOf(i);0>s||(i.keeper=void 0,this._sprites.splice(s,1),this.numSprites=this._sprites.length,this.removeChild(i))},this.resize=function(i){this.liquid===!0&&(this.width=i.width,this.height=i.height);return oak.each(this._sizers,function(s){s.sizer.call(s.child,i)}),oak.each(this._gfxList,function(i){i.calc()}),oak.each(this._resizers,function(s){s.call(null,i)}),this}}.inherit(oak.canvas.Sprite,{_init:function(i){oak.defined(i.camera)||console.log("!!! Can't render a scene without a camera"),this._prevPos={},this._resizers=[],this._sizers={},this._gfxList=[],this._sprites=[],this.camera=i.camera,this.numResizers=0,this.numGfx=0,this.numSprites=0,this.direction={x:0,y:0},this.shift={x:0,y:0},(i.width||i.height)&&(this.liquid=!1),oak.canvas.Sprite.prototype._init.call(this,i)},addChild:function(i,s){oak.defined(s)&&(this._sizers[i]={child:i,sizer:s},s.call(i,oak.canvas.renderer.getWindowBounds())),oak.canvas.Sprite.prototype.addChild.call(this,i)},addedToStage:function(){oak.canvas.renderer.addResizable(this)},calc:function(){this.globalX+=this.camera.x*this.range,this.globalY+=this.camera.y*this.range;var i=this.x-this._prevPos.x||0,s=this.y-this._prevPos.y||0;this.direction.x=i>0?1:0>i?-1:0,this.direction.y=s>0?1:0>s?-1:0,this._prevPos.x=this.x,this._prevPos.y=this.y},removed:function(){oak.canvas.renderer.removeResizable(this)},removeChild:function(i){delete this._sizers[i],oak.canvas.Sprite.prototype.removeChild.call(this,i)}}),oak.canvas.Scene.prototype.defaults({range:1,liquid:!0});
"use strict";oak.canvas.Resizable=function(){}.inherit(oak.canvas.Sprite,{addedToStage:function(){oak.canvas.renderer.addResizable(this)},removed:function(){oak.canvas.renderer.removeResizable(this)},resize:function(e){var i,n;for(n=0;n<this.numChildren;n+=1)i=this.children[n],"function"==typeof i.resize&&i.resize(e)}});
oak.canvas.MultilineText=function(){}.inherit(oak.canvas.Text,{_init:function(i){this._width=0,oak.canvas.Text.prototype._init.call(this,i),this._initSize=this.size,this._initWidth=this.width,this._lines=[],"undefined"==typeof this.lineHeight&&(this.lineHeight=this.size),this._inited=!0,this.width=i.width},_calcSize:function(i){var t=this._initWidth-(i-this.padding);this.size=this._initSize-this._initSize/this._initWidth*t,this.resetStyle()},_resize:function(i){var t,h,s=/[^\S]([\S]*$)/,e="",n=0,a=i-(this.padding.left+this.padding.right);for(this._lines=[],this._chars=this.label.split(""),t=0;t<this._chars.length;t+=1)e+=this._chars[t],n=oak.canvas.renderer.measureText(e,this.style).width,this._chars[t].match(/\n/)?(this._lines.push(e),e="",n=0):a>0&&n>a?(h=e.match(s),h&&h[1]?(e=e.replace(s,""),this._lines.push(e),e=h[1]):(this._lines.push(e),e=""),n=0):t==this._chars.length-1&&this._lines.push(e);this.height=this._lines.length*this.lineHeight},draw:function(i){oak.canvas.Text.prototype.draw.call(this,i);var t,h=this.padding.top;for(t=0;t<this._lines.length;t+=1)i.fillText(this._lines[t],0,h),h+=this.lineHeight}}),Object.defineProperty(oak.canvas.MultilineText.prototype,"width",{get:function(){return this._width},set:function(i){this._inited&&(this._width=i,this._resize(this._width))}}),oak.canvas.MultilineText.prototype.defaults({padding:{left:0,right:0,top:0,bottom:0},size:12,lineHeight:void 0,label:""});
"use strict";oak.canvas.Image=function(){this._init=function(){this.img=new Image,this.loaded=!1,this.nativeWidth=this.img.width,this.nativeHeight=this.img.height}}.inherit(oak.Evented),oak.extend(oak.canvas.Image.prototype,{load:function(i){if("undefined"==typeof i)return void console.error("No source was provided for the image.");var e=this;return this.img.onload=function(){e.img.onload=void 0,e.nativeWidth=e.img.width,e.nativeHeight=e.img.height,e.width=e.img.width/oak.canvas.renderer.pixelRatio,e.height=e.img.height/oak.canvas.renderer.pixelRatio,e.loaded=!0,e.trigger("loaded")},oak.canvas.renderer.pixelRatio>1&&(i=i.replace(/(.jpg|.png|.gif)$/,function(i){return"@2x"+i})),this.img.src=i,this}});
"use strict";oak.canvas.Graphic=inherit(oak.canvas.Sprite,function(){}),oak.extend(oak.canvas.Graphic.prototype,{_init:function(t){return"undefined"==typeof t.source||"undefined"==typeof t.source.img?void console.log("!!! You must specify a source that is of type oak.canvas.Image !!!"):(this.source=t.source,t.width=this.source.width,t.height=this.source.height,void oak.canvas.Sprite.prototype._init.call(this,t))},draw:function(t){t.drawImage(this.source.img,1,0,this.source.nativeWidth,this.source.nativeHeight,-this.centerX,-this.centerY,this.source.width,this.source.height)}});
oak.canvas.FluidText=function(){}.inherit(oak.canvas.Text,{_init:function(i){oak.canvas.Text.prototype._init.call(this,i),this._initSize=this.size,this._initWidth=this.width},_calcSize:function(i){var t=this._initWidth-(i-this.padding);this.size=this._initSize-this._initSize/this._initWidth*t,this.resetStyle()},resize:function(i){i.width<this._initWidth+this.padding?this._calcSize(i.width-this.padding):this.size!==this._initSize&&(this.size=this._initSize,this.resetStyle()),this.centered===!0&&(this.centerX=this.width/2)},addedToStage:function(){oak.canvas.renderer.addResizable(this)},draw:function(i){oak.canvas.Text.prototype.draw.call(this,i),i.fillText(this.label,0,0)},removed:function(){oak.canvas.renderer.removeResizable(this)}}),oak.canvas.FluidText.prototype.defaults({centered:!1,padding:10,size:12,label:""});
oak.canvas.FluidMultilineText=function(){}.inherit(oak.canvas.MultilineText,{addedToStage:function(){oak.canvas.renderer.addResizable(this)},removed:function(){oak.canvas.renderer.removeResizable(this)},resize:function(e){this.width=e.width-this.padding.left-this.padding.right}});
"use strict";oak.canvas.Circle=function(){}.inherit(oak.canvas.Sprite,{_init:function(t){oak.canvas.Sprite.prototype._init.call(this,t),this.width=this.height=2*this.radius},draw:function(t){t.beginPath(),t.arc(-this.centerX,-this.centerY,this.radius,0,2*Math.PI,!1),t.fillStyle=this.color,t.fill(),this.strokeStyle&&(t.strokeStyle=this.strokeStyle,t.lineWidth=this.lineWidth,t.stroke())}}),oak.canvas.Circle.prototype.defaults({color:"#FFF",lineWidth:1,strokeStyle:null,radius:100});